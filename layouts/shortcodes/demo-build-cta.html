{{- $id := .Get "id" | default "build-cta" -}}
{{- $kickerText := .Get "kicker_text" | default "Ready to Build?" -}}
{{- $kickerIcon := .Get "kicker_icon" | default "fa-solid fa-sparkles" -}}
{{- $kickerClass := .Get "kicker_class" | default "bg-hologram-primary/10 text-hologram-primary" -}}
{{- $title := .Get "title" | default "Want to build your" -}}
{{- $highlight := .Get "highlight_text" | default "own service?" -}}
{{- $description := "" -}}
{{- with .Get "description" }}
  {{- $description = markdownify . -}}
{{- end -}}
{{- $primaryLabel := .Get "primary_label" -}}
{{- $primary := "" -}}
{{- if $primaryLabel }}
  {{- $primary = dict "label" $primaryLabel "url" (.Get "primary_url") "icon" (.Get "primary_icon") -}}
{{- end -}}
{{- $secondaryLabel := .Get "secondary_label" -}}
{{- $secondary := "" -}}
{{- if $secondaryLabel }}
  {{- $secondary = dict "label" $secondaryLabel "url" (.Get "secondary_url") "icon" (.Get "secondary_icon") -}}
{{- end -}}
{{- $featureTitles := split (.Get "feature_titles") "|" -}}
{{- $featureDescriptions := split (.Get "feature_descriptions") "|" -}}
{{- $featureIcons := split (.Get "feature_icons") "|" -}}
{{- $featureIconBgs := split (.Get "feature_icon_bg_classes") "|" -}}
{{- $featureIconColors := split (.Get "feature_icon_color_classes") "|" -}}
{{- $features := slice -}}
{{- range $index, $titleValue := $featureTitles }}
  {{- $titleTrim := trim $titleValue " " -}}
  {{- if gt (len $titleTrim) 0 }}
    {{- $desc := "" -}}
    {{- if lt $index (len $featureDescriptions) }}{{ $desc = index $featureDescriptions $index }}{{ end -}}
    {{- $icon := "" -}}
    {{- if lt $index (len $featureIcons) }}{{ $icon = index $featureIcons $index }}{{ end -}}
    {{- $iconBg := "bg-hologram-primary/10" -}}
    {{- if lt $index (len $featureIconBgs) }}{{ $iconBg = index $featureIconBgs $index }}{{ end -}}
    {{- $iconColor := "text-hologram-primary" -}}
    {{- if lt $index (len $featureIconColors) }}{{ $iconColor = index $featureIconColors $index }}{{ end -}}
    {{- $features = $features | append (dict "title" $titleTrim "description" $desc "icon" $icon "icon_bg" $iconBg "icon_color" $iconColor) -}}
  {{- end -}}
{{- end -}}
{{- $statValues := split (.Get "stat_values") "|" -}}
{{- $statLabels := split (.Get "stat_labels") "|" -}}
{{- $statColors := split (.Get "stat_color_classes") "|" -}}
{{- $stats := slice -}}
{{- range $index, $value := $statValues }}
  {{- $valTrim := trim $value " " -}}
  {{- if gt (len $valTrim) 0 }}
    {{- $label := "" -}}
    {{- if lt $index (len $statLabels) }}{{ $label = index $statLabels $index }}{{ end -}}
    {{- $color := "text-hologram-primary" -}}
    {{- if lt $index (len $statColors) }}{{ $color = index $statColors $index }}{{ end -}}
    {{- $stats = $stats | append (dict "value" $valTrim "label" $label "color" $color) -}}
  {{- end -}}
{{- end -}}
{{- $terminalLinesRaw := split (.Get "terminal_lines") "|" -}}
{{- $terminalLines := slice -}}
{{- range $line := $terminalLinesRaw }}
  {{- $trimmed := trim $line " " -}}
  {{- if gt (len $trimmed) 0 }}
    {{- $parts := split $trimmed "::" -}}
    {{- $lineType := "default" -}}
    {{- $lineText := $trimmed -}}
    {{- if ge (len $parts) 2 }}
      {{- $lineType = index $parts 0 -}}
      {{- $lineText = index $parts 1 -}}
    {{- end -}}
    {{- $terminalLines = $terminalLines | append (dict "type" (lower $lineType) "text" $lineText) -}}
  {{- end -}}
{{- end -}}
<section id="{{ $id }}" class="py-24 bg-white relative overflow-hidden">
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-20 left-20 w-72 h-72 hologram-gradient-light rounded-full blur-3xl"></div>
    <div class="absolute bottom-20 right-20 w-96 h-96 hologram-gradient-light rounded-full blur-3xl"></div>
  </div>
  <div class="container mx-auto px-6 relative z-10">
    <div class="max-w-6xl mx-auto">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div>
          <div class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold mb-6 {{ $kickerClass }}">
            {{ if $kickerIcon }}<i class="{{ $kickerIcon }} mr-2"></i>{{ end }}
            <span>{{ $kickerText }}</span>
          </div>
          <h2 class="text-5xl font-bold text-gray-900 mb-6 leading-tight">
            {{ $title | safeHTML }}
            {{ if $highlight }}
              <span class="bg-gradient-to-r from-hologram-primary to-hologram-dark bg-clip-text text-transparent">{{ $highlight | safeHTML }}</span>
            {{ end }}
          </h2>
          {{ with $description }}
            <div class="text-xl text-gray-600 mb-8 leading-relaxed">{{ . | safeHTML }}</div>
          {{ end }}
          {{ if gt (len $features) 0 }}
            <div class="space-y-4 mb-8">
              {{ range $features }}
                <div class="flex items-start">
                  <div class="w-8 h-8 {{ .icon_bg }} rounded-lg flex items-center justify-center mr-4 flex-shrink-0">
                    {{ if .icon }}<i class="{{ .icon }} {{ .icon_color }}"></i>{{ end }}
                  </div>
                  <div>
                    <h3 class="font-semibold text-gray-900 mb-1">{{ .title }}</h3>
                    <p class="text-gray-600">{{ .description }}</p>
                  </div>
                </div>
              {{ end }}
            </div>
          {{ end }}
          {{ if or $primary $secondary }}
            <div class="flex flex-col sm:flex-row gap-4">
              {{ with $primary }}
                {{ $url := .url }}
                {{ $label := .label }}
                {{ $icon := .icon }}
                {{ $isExternal := or (strings.HasPrefix $url "http") (strings.HasPrefix $url "mailto:") }}
                <a href="{{ $url }}" class="inline-flex items-center justify-center bg-hologram-primary text-white px-8 py-4 rounded-lg hover:bg-hologram-secondary transition-all duration-200 font-bold text-lg shadow-lg hover:shadow-xl hover:-translate-y-1"{{ if $isExternal }} target="_blank" rel="noopener noreferrer"{{ end }}>
                  {{ if $icon }}<i class="{{ $icon }} mr-3"></i>{{ end }}
                  <span>{{ $label }}</span>
                </a>
              {{ end }}
              {{ with $secondary }}
                {{ $url := .url }}
                {{ $label := .label }}
                {{ $icon := .icon }}
                {{ $isExternal := or (strings.HasPrefix $url "http") (strings.HasPrefix $url "mailto:") }}
                <a href="{{ $url }}" class="inline-flex items-center justify-center bg-white border-2 border-hologram-primary text-hologram-primary px-8 py-4 rounded-lg hover:bg-hologram-primary hover:text-white transition-all duration-200 font-bold text-lg"{{ if $isExternal }} target="_blank" rel="noopener noreferrer"{{ end }}>
                  {{ if $icon }}<i class="{{ $icon }} mr-3"></i>{{ end }}
                  <span>{{ $label }}</span>
                </a>
              {{ end }}
            </div>
          {{ end }}
        </div>
        <div class="relative">
          <div class="bg-gradient-to-br from-hologram-primary/5 to-hologram-dark/5 rounded-2xl p-8 border border-hologram-primary/20">
            <div class="bg-white rounded-xl shadow-2xl p-6 mb-6">
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center space-x-3">
                  <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                  <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                  <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                </div>
                <span class="text-xs text-gray-500 font-mono">{{ .Get "terminal_title" | default "terminal" }}</span>
              </div>
              <div class="bg-gray-900 rounded-lg p-4 font-mono text-sm space-y-2">
                {{ range $terminalLines }}
                  {{ $class := "text-gray-400" }}
                  {{ if eq .type "command" }}{{ $class = "text-green-400" }}{{ end }}
                  {{ if eq .type "$" }}{{ $class = "text-green-400" }}{{ end }}
                  {{ if eq .type "success" }}{{ $class = "text-green-400 mt-3" }}{{ end }}
                  <div class="{{ $class }}">{{ .text }}</div>
                {{ end }}
              </div>
            </div>
            {{ if gt (len $stats) 0 }}
              <div class="grid grid-cols-3 gap-4">
                {{ range $stats }}
                  <div class="bg-white rounded-lg p-4 text-center shadow-lg">
                    <div class="text-2xl font-bold {{ .color }} mb-1">{{ .value }}</div>
                    <div class="text-xs text-gray-600">{{ .label }}</div>
                  </div>
                {{ end }}
              </div>
            {{ end }}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
