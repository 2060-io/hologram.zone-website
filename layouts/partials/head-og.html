{{/* Open Graph and Twitter Card meta */}}
{{ $siteTitle := .Site.Title }}
{{ $title := or (.Scratch.Get "meta_title") "" }}
{{ $desc := or (.Scratch.Get "meta_description") "" }}
{{ if not $title }}
  {{ $resolved := partial "meta/resolved.html" . }}
  {{ $title = $resolved.title }}
  {{ if not $desc }}{{ $desc = $resolved.description }}{{ end }}
{{ end }}
{{ if not $desc }}
  {{ $desc = .Site.Params.header.tagline | default "Verifiable trust for digital ecosystems" }}
{{ end }}

{{ $type := "website" }}
{{ if .IsPage }}{{ $type = "article" }}{{ end }}

{{ $firstImg := "" }}
{{ with .Params.images }}{{ if ge (len .) 1 }}{{ $firstImg = index . 0 }}{{ end }}{{ end }}
{{ $img := or .Params.og_image (or $firstImg (or .Site.Params.seo.ogImage "/images/hologram-og.jpg")) }}
{{ $imgURL := $img | absURL }}

<meta property="og:type" content="{{ $type }}">
<meta property="og:site_name" content="{{ $siteTitle }}">
<meta property="og:title" content="{{ $title }}">
<meta property="og:description" content="{{ $desc }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:image" content="{{ $imgURL }}">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ $title }}">
<meta name="twitter:description" content="{{ $desc }}">
<meta name="twitter:image" content="{{ $imgURL }}">
